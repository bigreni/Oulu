(window.webpackJsonp=window.webpackJsonp||[]).push([["itinerary~map~route~styleguide"],{"./app/component/Departure.js":function(e,t,a){"use strict";var i=a("./node_modules/prop-types/index.js"),n=a.n(i),r=a("./node_modules/react/index.js"),o=a.n(r),s=a("./node_modules/classnames/index.js"),l=a.n(s),c=a("./node_modules/react-intl/lib/index.es.js"),d=a("./app/component/RouteNumberContainer.js"),p=a("./app/component/RouteDestination.js"),m=a("./app/component/DepartureTime.js"),u=a("./app/component/PlatformNumber.js"),f=a("./app/component/ComponentUsageExample.js"),h=a("./app/util/legUtils.js"),x=a("./app/component/ExampleData.js");function y(e){var t=e.departure.pattern.route.mode.toLowerCase(),a=!1;return e.showPlatformCode&&e.departure.stop.platformCode&&(a=o.a.createElement(u.a,{number:e.departure.stop.platformCode})),o.a.createElement("p",{className:l()("departure","route-detail-text",e.className)},o.a.createElement(m.a,{departureTime:e.departure.stoptime,realtime:e.departure.realtime,currentTime:e.currentTime,canceled:e.canceled,useUTC:e.useUTC}),o.a.createElement(d.a,{route:e.departure.pattern.route,hasDisruption:e.hasDisruption,isCallAgency:Object(h.i)(e.departure),fadeLong:!0}),o.a.createElement(p.a,{mode:t,destination:e.departure.headsign||e.departure.pattern.headsign||e.departure.trip.tripHeadsign||e.departure.pattern.route.longName,isArrival:e.isArrival}),a)}y.description=function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Display a departure row using react components"),o.a.createElement(f.a,null,o.a.createElement(y,{departure:x.g,currentTime:x.a,useUTC:!0})),o.a.createElement(f.a,{description:"adding padding classes"},o.a.createElement(y,{departure:x.b,currentTime:x.a,className:"padding-normal padding-bottom",useUTC:!0})),o.a.createElement(f.a,{description:"with platform number"},o.a.createElement(y,{departure:x.b,currentTime:x.a,className:"padding-normal padding-bottom desktop",showPlatformCode:!0,useUTC:!0})),o.a.createElement(f.a,{description:"isArrival true"},o.a.createElement(y,{departure:x.b,currentTime:x.a,className:"padding-normal padding-bottom",useUTC:!0,isArrival:!0})))},y.displayName="Departure",y.propTypes={canceled:n.a.bool,className:n.a.string,hasDisruption:n.a.bool,currentTime:n.a.number.isRequired,departure:n.a.object.isRequired,isArrival:n.a.bool,showPlatformCode:n.a.bool,useUTC:n.a.bool},y.defaultProps={showPlatformCode:!1},y.contextTypes={config:n.a.object.isRequired,intl:c.d.isRequired},t.a=y},"./app/component/DepartureListContainer.js":function(e,t,a){"use strict";var i=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=a("./node_modules/prop-types/index.js"),r=a.n(n),o=a("./node_modules/react/index.js"),s=a.n(o),l=a("./node_modules/react-relay/classic.js"),c=a.n(l),d=a("./node_modules/lodash-es/get.js"),p=a("./node_modules/lodash-es/filter.js"),m=a("./node_modules/lodash-es/uniqBy.js"),u=a("./node_modules/lodash-es/difference.js"),f=a("./node_modules/moment/moment.js"),h=a.n(f),x=a("./node_modules/react-router/es/index.js"),y=a("./node_modules/recompose/getContext.js"),g=a.n(y),b=a("./node_modules/classnames/index.js"),v=a.n(b),S=a("./app/component/Departure.js"),N=a("./app/util/browser.js"),T=a("./app/util/path.js"),j=a("./app/action/RealtimeDeparturesActions.js"),k=function(e){function t(t){var a;return(a=e.call(this,t)||this).onScroll=function(){return a.props.infiniteScroll&&N.c?a.scrollHandler:null},a.getDepartures=function(e,t){var i=t||a.props,n=i.currentTime,r=i.isTerminal,o=i.stoptimes,s=i.limit;e=e||s;var l=function(e){return e?e.map((function(e){var t="NONE"===e.pickupType,a="CANCELED"===e.realtimeState,i=e.serviceDay+(a?e.scheduledArrival:e.realtimeArrival),n=e.serviceDay+(a?e.scheduledDeparture:e.realtimeDeparture);return{canceled:a,isArrival:t,stoptime:t?i:n,stop:e.stop,realtime:e.realtime,pattern:e.trip.pattern,headsign:e.headsign,trip:e.trip,pickupType:e.pickupType}})):[]}(o).filter((function(e){return!(r&&e.isArrival)})).filter((function(e){return n<e.stoptime}));return l.slice(0,s)},a.state={stopId:Object(d.a)(t,"router.params.stopId")},a}Object(i.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.context.config.stopsRealtimeTrackingLimit,t=Object(m.a)(this.getDepartures(e),(function(e){return e.pattern.code}));if(Array.isArray(t)&&t.length){var a=this.props.hasRealtimeVehicles;a&&a()}},a.componentWillReceiveProps=function(e){if(e.updateRealtimeVehicles){var t=this.context.config.stopsRealtimeTrackingLimit,a=Object(m.a)(this.getDepartures(t),(function(e){return e.pattern.code})),i=Object(m.a)(this.getDepartures(t,e),(function(e){return e.pattern.code}));e.showRealtimeVehicles&&(e.showRealtimeVehicles!==this.props.showRealtimeVehicles||Object(d.a)(e,"router.params.stopId")&&Object(d.a)(e,"router.params.stopId")!==this.state.stopId&&Object(u.a)(a.map((function(e){return Object(d.a)(e,"pattern.route.gtfsId")})),i.map((function(e){return Object(d.a)(e,"pattern.route.gtfsId")}))).length>0)?(this.context.executeAction(j.b,i),Object(d.a)(e,"router.params.stopId")&&this.setState({stopId:Object(d.a)(e,"router.params.stopId")})):e.showRealtimeVehicles===this.props.showRealtimeVehicles||e.showRealtimeVehicles||this.context.executeAction(j.a)}},a.render=function(){var e=this,t=[],a=this.props.currentTime,i=h.a.unix(a).startOf("day").unix(),n=h.a.unix(a).add(1,"day").startOf("day").unix();return this.getDepartures().forEach((function(r){r.stoptime>=n&&(t.push(s.a.createElement("div",{key:h.a.unix(r.stoptime).format("DDMMYYYY"),className:"date-row border-bottom"},h.a.unix(r.stoptime).format("dddd D.M.YYYY"))),i=n,n=h.a.unix(i).add(1,"day").startOf("day").unix());var o,l,c=r.pattern.code+":"+r.stoptime,d={disruption:(o=r.stoptime,l=r.pattern.route.alerts,Object(p.a)(l,(function(e){return e.effectiveStartDate<o&&o<e.effectiveEndDate})).length>0),canceled:r.canceled},m=s.a.createElement(S.a,{key:c,departure:r,showStop:e.props.showStops,currentTime:a,hasDisruption:d.disruption,className:v()(d,e.props.rowClasses),canceled:r.canceled,isArrival:r.isArrival,showPlatformCode:e.props.showPlatformCodes});e.props.routeLinks?t.push(s.a.createElement(x.Link,{to:"/"+T.b+"/"+r.pattern.route.gtfsId+"/pysakit/"+r.pattern.code,key:c},m)):t.push(m)})),s.a.createElement("div",{className:v()("departure-list",this.props.className),onScroll:this.onScroll()},t)},t}(o.Component);k.propTypes={rowClasses:r.a.string.isRequired,stoptimes:r.a.array.isRequired,currentTime:r.a.number.isRequired,limit:r.a.number,infiniteScroll:r.a.bool,showStops:r.a.bool,routeLinks:r.a.bool,className:r.a.string,isTerminal:r.a.bool,showPlatformCodes:r.a.bool,showRealtimeVehicles:r.a.bool,hasRealtimeVehicles:r.a.func,updateRealtimeVehicles:r.a.bool,router:x.routerShape.isRequired},k.defaultProps={showPlatformCodes:!1,showRealtimeVehicles:!1,hasRealtimeVehicles:void 0},k.contextTypes={executeAction:r.a.func.isRequired,config:r.a.shape({stopsRealtimeTrackingLimit:r.a.number})},t.a=c.a.createContainer(g()({router:x.routerShape.isRequired})(k),{fragments:{stoptimes:function(){return{children:[{fieldName:"realtimeState",kind:"Field",metadata:{},type:"RealtimeState"},{fieldName:"realtimeDeparture",kind:"Field",metadata:{},type:"Int"},{fieldName:"scheduledDeparture",kind:"Field",metadata:{},type:"Int"},{fieldName:"realtimeArrival",kind:"Field",metadata:{},type:"Int"},{fieldName:"scheduledArrival",kind:"Field",metadata:{},type:"Int"},{fieldName:"realtime",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"serviceDay",kind:"Field",metadata:{},type:"Long"},{fieldName:"pickupType",kind:"Field",metadata:{},type:"PickupDropoffType"},{fieldName:"headsign",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"code",kind:"Field",metadata:{},type:"String"},{fieldName:"platformCode",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"stop",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Stop"},{children:[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"tripHeadsign",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"code",kind:"Field",metadata:{},type:"String"},{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"stops",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isPlural:!0},type:"Stop"},{children:[{children:[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"shortName",kind:"Field",metadata:{},type:"String"},{fieldName:"longName",kind:"Field",metadata:{},type:"String"},{fieldName:"mode",kind:"Field",metadata:{},type:"TransitMode"},{fieldName:"color",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"effectiveStartDate",kind:"Field",metadata:{},type:"Long"},{fieldName:"effectiveEndDate",kind:"Field",metadata:{},type:"Long"}],fieldName:"alerts",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isPlural:!0},type:"Alert"},{children:[{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"agency",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Agency"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"route",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Route"},{fieldName:"code",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"pattern",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Pattern"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"trip",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Trip"}],id:c.a.QL.__id(),kind:"Fragment",metadata:{plural:!0},name:"DepartureListContainer_StoptimesRelayQL",type:"Stoptime"}}}})},"./app/component/InfoIcon.js":function(e,t,a){"use strict";var i=a("./node_modules/prop-types/index.js"),n=a.n(i),r=a("./node_modules/react/index.js"),o=a.n(r),s=a("./node_modules/react-router/es/index.js"),l=a("./app/component/Icon.js"),c=a("./app/component/ComponentUsageExample.js"),d=a("./app/util/path.js"),p=function(e){var t=e.stop;return o.a.createElement(s.Link,{href:"/"+d.c+"/"+t.gtfsId+"/info"},o.a.createElement("span",{className:"cursor-pointer"},o.a.createElement(l.a,{className:"info",img:"icon-icon_info"})))};p.propTypes={stop:n.a.object.isRequired},p.displayName="InfoIcon";var m={code:"4611",gtfsId:"HSL:1541157",name:"Kaivonkatsojanpuisto",desc:"Kaivonkatsojantie"};p.description=function(){return o.a.createElement("div",null,o.a.createElement(c.a,{description:"basic"},o.a.createElement(p,{stop:m})))},t.a=p},"./app/component/PlatformNumber.js":function(e,t,a){"use strict";var i=a("./node_modules/prop-types/index.js"),n=a.n(i),r=a("./node_modules/react/index.js"),o=a.n(r),s=a("./node_modules/react-intl/lib/index.es.js"),l=a("./app/component/ComponentUsageExample.js");function c(e){var t=e.number,a=e.short;return!!t&&(a?o.a.createElement("span",{className:"platform-short"},o.a.createElement(s.a,{id:"platform-short",values:{platformCode:t},defaultMessage:"Plat. {platformCode}"})):o.a.createElement("span",{className:"platform-number"},o.a.createElement(s.a,{id:"platform-num",values:{platformCode:t},defaultMessage:"Platform {platformCode}"})))}c.propTypes={number:n.a.string,short:n.a.bool},c.defaultProps={number:!1,short:!0},c.displayName="PlatformNumber",c.description=function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Displays the platform number for a specific departure"),o.a.createElement(l.a,null,o.a.createElement(c,{number:"2"})))},t.a=c},"./app/component/StopCardHeader.js":function(e,t,a){"use strict";var i=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=a("./node_modules/prop-types/index.js"),r=a.n(n),o=a("./node_modules/react/index.js"),s=a.n(o),l=a("./app/component/CardHeader.js"),c=a("./app/component/ComponentUsageExample.js"),d=a("./app/component/InfoIcon.js"),p=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var a=t.prototype;return a.getDescription=function(){var e="";return this.context.config.stopCard.header.showDescription&&this.props.stop.desc&&(e+=this.props.stop.desc),this.context.config.stopCard.header.showDistance&&this.props.distance&&(e+=" // "+Math.round(this.props.distance)+" m"),e},a.render=function(){return!!this.props.stop&&s.a.createElement(l.a,{className:this.props.className,headingStyle:this.props.headingStyle,name:this.props.stop.name,description:this.getDescription(),code:this.context.config.stopCard.header.showStopCode&&this.props.stop.code?this.props.stop.code:null,icons:this.props.icons})},t}(s.a.Component);p.propTypes={stop:r.a.object,distance:r.a.number,className:r.a.string,headingStyle:r.a.string,icons:r.a.arrayOf(r.a.node)},p.contextTypes={config:r.a.object.isRequired};var m={code:"4611",gtfsId:"HSL:1541157",name:"Kaivonkatsojanpuisto",desc:"Kaivonkatsojantie"},u=[s.a.createElement(d.a,{stop:m,key:"example"})];p.displayName="StopCardHeader",p.description=function(){return s.a.createElement("div",null,s.a.createElement(c.a,{description:"basic"},s.a.createElement(p,{stop:m,distance:345.6})),s.a.createElement(c.a,{description:"with icons"},s.a.createElement(p,{stop:m,distance:345.6,icons:u})))},t.a=p},"./app/component/StopCardHeaderContainer.js":function(e,t,a){"use strict";var i=a("./node_modules/react-relay/classic.js"),n=a.n(i),r=a("./app/component/StopCardHeader.js");t.a=n.a.createContainer(r.a,{fragments:{stop:function(){return{children:[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"code",kind:"Field",metadata:{},type:"String"},{fieldName:"desc",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:n.a.QL.__id(),kind:"Fragment",metadata:{},name:"StopCardHeaderContainer_StopRelayQL",type:"Stop"}}}})},"./app/component/map/MarkerPopupBottom.js":function(e,t,a){"use strict";var i=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),n=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),r=a("./node_modules/prop-types/index.js"),o=a.n(r),s=a("./node_modules/react/index.js"),l=a.n(s),c=a("./node_modules/lodash-es/get.js"),d=a("./node_modules/react-router/es/index.js"),p=a("./node_modules/react-intl/lib/index.es.js"),m=a("./node_modules/react-leaflet/es/context.js"),u=a("./app/util/path.js"),f=a("./app/util/searchUtils.js"),h=a("./app/util/shapes.js"),x=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).routeFrom=function(){var e,a=Object(f.d)(t.context.getStore,t.context.location),n=Object(c.a)(t.context,"location.pathname"),r=n.split("/")[1];if(-1!==[u.b,u.c].indexOf(r))e={set:!1};else if(r===u.a){var o=n.split("/")[3];e=Object(u.k)(o)}else{var s=n.split("/")[2];e=Object(u.k)(s)}t.props.leaflet.map.closePopup(),Object(u.j)({origin:Object(i.a)({},t.props.location,{ready:!0}),destination:e,context:r,router:t.context.router,base:a,resetIndex:!0})},t.routeTo=function(){var e,a=Object(f.d)(t.context.getStore,t.context.location),n=Object(c.a)(t.context,"location.pathname"),r=n.split("/")[1];if(-1!==[u.b,u.c].indexOf(r))e={set:!1};else if(r===u.a){var o=n.split("/")[2];e=Object(u.k)(o)}else{var s=n.split("/")[1];e=Object(u.k)(s)}t.props.leaflet.map.closePopup(),Object(u.j)({origin:e,destination:Object(i.a)({},t.props.location,{ready:!0}),context:r,router:t.context.router,base:a,resetIndex:!0})},t}return Object(n.a)(t,e),t.prototype.render=function(){var e=this;return l.a.createElement("div",{className:"bottom location"},l.a.createElement("div",{onClick:function(){return e.routeFrom()},className:"route cursor-pointer"},l.a.createElement(p.a,{id:"route-from-here",defaultMessage:"Route from here"})),this.props.children,l.a.createElement("div",{onClick:function(){return e.routeTo()},className:"route cursor-pointer"},l.a.createElement(p.a,{id:"route-here",defaultMessage:"Route here"})))},t}(l.a.Component);x.displayName="MarkerPopupBottom",x.propTypes={location:h.a.isRequired,children:o.a.node,leaflet:o.a.shape({map:o.a.shape({closePopup:o.a.func.isRequired}).isRequired}).isRequired},x.defaultProps={children:void 0},x.contextTypes={router:d.routerShape.isRequired,location:d.locationShape.isRequired,getStore:o.a.func.isRequired},t.a=Object(m.b)(x)},"./app/component/map/popups/StopMarkerPopup.js":function(e,t,a){"use strict";var i=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),n=a("./node_modules/moment/moment.js"),r=a.n(n),o=a("./node_modules/prop-types/index.js"),s=a.n(o),l=a("./node_modules/react/index.js"),c=a.n(l),d=a("./node_modules/react-relay/classic.js"),p=a.n(d),m=a("./node_modules/fluxible-addons-react/connectToStores.js"),u=a.n(m),f=a("./node_modules/react-intl/lib/index.es.js"),h=a("./node_modules/react-router/es/index.js"),x=function(e){var t;switch(e.importCss&&a.e(2).then(a.bind(null,"./node_modules/leaflet/dist/leaflet.css")).catch((function(){})),e.size){case"small":t=8;break;case"large":t=19;break;default:t=14}return c.a.createElement("div",{className:"leaflet-container",style:{height:t+"rem"}},c.a.createElement("div",{className:"leaflet-popup popup leaflet-zoom-animated",style:{transform:"translate3d(30px, 10px, 0)"}},c.a.createElement("div",{className:"leaflet-popup-content-wrapper"},c.a.createElement("a",{className:"leaflet-popup-close-button",href:"#close"},"×"),c.a.createElement("div",{className:"leaflet-popup-content"},e.children),c.a.createElement("div",{className:"leaflet-popup-tip-container"},c.a.createElement("div",{className:"leaflet-popup-tip"})))))};x.propTypes={children:s.a.node.isRequired,importCss:s.a.bool,size:s.a.oneOf(["small","medium","large"])},x.defaultProps={importCss:!0,size:"medium"};var y=x,g=a("./app/component/map/MarkerPopupBottom.js"),b=a("./app/component/StopCardHeaderContainer.js"),v=a("./app/component/DepartureListContainer.js"),S=a("./app/component/Card.js");function N(e){if(!e.stop||!e.children||0===e.children.length)return!1;var t=e.isTerminal?"terminaalit":"pysakit";return c.a.createElement(h.Link,{to:"/"+t+"/"+encodeURIComponent(e.stop.gtfsId),className:"no-decoration"},c.a.createElement(S.a,{className:e.className},c.a.createElement(b.a,{stop:e.stop,icons:e.icons,distance:e.distance,headingStyle:"header-primary"}),e.children))}N.propTypes={stop:s.a.shape({gtfsId:s.a.string.isRequired}),icons:s.a.arrayOf(s.a.node),distance:s.a.number,className:s.a.string,children:s.a.node,isTerminal:s.a.bool};var T=N,j=u()(T,["FavouriteStopsStore"],(function(e,t){return{isTerminal:t.isTerminal,children:c.a.createElement(v.a,{rowClasses:"no-padding no-margin",stoptimes:t.stop.stoptimes,limit:t.limit,isTerminal:t.isTerminal,currentTime:t.relay.variables.startTime,showPlatformCodes:!0,showRealtimeVehicles:t.showRealtimeVehicles,hasRealtimeVehicles:t.hasRealtimeVehicles,updateRealtimeVehicles:t.updateRealtimeVehicles})}}));j.contextTypes={executeAction:s.a.func.isRequired,getStore:s.a.func.isRequired};var k=p.a.createContainer(j,{fragments:{stop:function(){return e=v.a.getFragment("stoptimes"),t=b.a.getFragment("stop"),{children:[].concat.apply([],[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{alias:"stoptimes",calls:[{kind:"Call",metadata:{type:"Long"},name:"startTime",value:{kind:"CallVariable",callVariableName:"startTime"}},{kind:"Call",metadata:{type:"Int"},name:"timeRange",value:{kind:"CallVariable",callVariableName:"timeRange"}},{kind:"Call",metadata:{type:"Int"},name:"numberOfDepartures",value:{kind:"CallVariable",callVariableName:"numberOfDepartures"}}],children:[].concat.apply([],[p.a.QL.__frag(e)]),fieldName:"stoptimesWithoutPatterns",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"Stoptime"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},p.a.QL.__frag(t)]),id:p.a.QL.__id(),kind:"Fragment",metadata:{},name:"StopCardContainer_StopRelayQL",type:"Stop"};var e,t}},initialVariables:{startTime:0,timeRange:43200,numberOfDepartures:5}}),R=a("./app/component/ComponentUsageExample.js"),C=a("./app/component/Icon.js"),D=a("./app/action/MapLayerActions.js"),E=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),w=a("./node_modules/lodash-es/cloneDeep.js"),O={stop:{code:"0612",desc:"Ratapihantie",gtfsId:"HSL:1220434",lat:60.19951,lon:24.93424,name:"Pasilan asema",stoptimes:[]},terminal:null},_=[{realtimeState:"UPDATED",realtimeDeparture:53820,scheduledDeparture:53820,realtimeArrival:53820,scheduledArrival:53820,realtime:!0,serviceDay:1524085200,pickupType:"SCHEDULED",stopHeadsign:"Jätkäsaari via Kallio",stop:{code:"0612",platformCode:"18",id:"U3RvcDpIU0w6MTIyMDQzNA=="},trip:{gtfsId:"HSL:1009_20180416_To_2_1457",pattern:{route:{gtfsId:"HSL:1009",shortName:"9",longName:"Jätkäsaari - Rautatieasema - Kallio - Pasilan asema",mode:"TRAM",color:null,alerts:[],agency:{name:"Helsingin seudun liikenne",id:"QWdlbmN5OkhTTA=="},id:"Um91dGU6SFNMOjEwMDk="},code:"HSL:1009:1:01",id:"UGF0dGVybjpIU0w6MTAwOToxOjAx"},id:"VHJpcDpIU0w6MTAwOV8yMDE4MDQxNl9Ub18yXzE0NTc="}},{realtimeState:"UPDATED",realtimeDeparture:54142,scheduledDeparture:54120,realtimeArrival:54142,scheduledArrival:54120,realtime:!0,serviceDay:1524085200,pickupType:"NONE",stopHeadsign:null,stop:{code:"0612",platformCode:"18",id:"U3RvcDpIU0w6MTIyMDQzNA=="},trip:{gtfsId:"HSL:1009_20180416_To_1_1424",pattern:{route:{gtfsId:"HSL:1009",shortName:"9",longName:"Jätkäsaari - Rautatieasema - Kallio - Pasilan asema",mode:"TRAM",color:null,alerts:[],agency:{name:"Helsingin seudun liikenne",id:"QWdlbmN5OkhTTA=="},id:"Um91dGU6SFNMOjEwMDk="},code:"HSL:1009:0:02",id:"UGF0dGVybjpIU0w6MTAwOTowOjAy"},id:"VHJpcDpIU0w6MTAwOV8yMDE4MDQxNl9Ub18xXzE0MjQ="}},{realtimeState:"SCHEDULED",realtimeDeparture:54420,scheduledDeparture:54420,realtimeArrival:54420,scheduledArrival:54420,realtime:!1,serviceDay:1524085200,pickupType:"SCHEDULED",stopHeadsign:"Jätkäsaari via Kallio",stop:{code:"0612",platformCode:"18",id:"U3RvcDpIU0w6MTIyMDQzNA=="},trip:{gtfsId:"HSL:1009_20180416_To_2_1507",pattern:{route:{gtfsId:"HSL:1009",shortName:"9",longName:"Jätkäsaari - Rautatieasema - Kallio - Pasilan asema",mode:"TRAM",color:null,alerts:[],agency:{name:"Helsingin seudun liikenne",id:"QWdlbmN5OkhTTA=="},id:"Um91dGU6SFNMOjEwMDk="},code:"HSL:1009:1:01",id:"UGF0dGVybjpIU0w6MTAwOToxOjAx"},id:"VHJpcDpIU0w6MTAwOV8yMDE4MDQxNl9Ub18yXzE1MDc="}},{realtimeState:"UPDATED",realtimeDeparture:54689,scheduledDeparture:54660,realtimeArrival:54689,scheduledArrival:54660,realtime:!0,serviceDay:1524085200,pickupType:"NONE",stopHeadsign:null,stop:{code:"0612",platformCode:"18",id:"U3RvcDpIU0w6MTIyMDQzNA=="},trip:{gtfsId:"HSL:1009_20180416_To_1_1433",pattern:{route:{gtfsId:"HSL:1009",shortName:"9",longName:"Jätkäsaari - Rautatieasema - Kallio - Pasilan asema",mode:"TRAM",color:null,alerts:[],agency:{name:"Helsingin seudun liikenne",id:"QWdlbmN5OkhTTA=="},id:"Um91dGU6SFNMOjEwMDk="},code:"HSL:1009:0:02",id:"UGF0dGVybjpIU0w6MTAwOTowOjAy"},id:"VHJpcDpIU0w6MTAwOV8yMDE4MDQxNl9Ub18xXzE0MzM="}},{realtimeState:"SCHEDULED",realtimeDeparture:54960,scheduledDeparture:54960,realtimeArrival:54960,scheduledArrival:54960,realtime:!1,serviceDay:1524085200,pickupType:"SCHEDULED",stopHeadsign:"Jätkäsaari via Kallio",stop:{code:"0612",platformCode:"18",id:"U3RvcDpIU0w6MTIyMDQzNA=="},trip:{gtfsId:"HSL:1009_20180416_To_2_1516",pattern:{route:{gtfsId:"HSL:1009",shortName:"9",longName:"Jätkäsaari - Rautatieasema - Kallio - Pasilan asema",mode:"TRAM",color:null,alerts:[],agency:{name:"Helsingin seudun liikenne",id:"QWdlbmN5OkhTTA=="},id:"Um91dGU6SFNMOjEwMDk="},code:"HSL:1009:1:01",id:"UGF0dGVybjpIU0w6MTAwOToxOjAx"},id:"VHJpcDpIU0w6MTAwOV8yMDE4MDQxNl9Ub18yXzE1MTY="}}],I=Object(E.a)({},Object(w.a)(O));I.stop.stoptimes=Object(w.a)(_),I.stop.stoptimes.forEach((function(e){e.realtime=!1,e.realtimeState="SCHEDULED"}));var A=Object(E.a)({},Object(w.a)(O));A.stop.stoptimes=Object(w.a)(_);var F=Object(E.a)({},Object(w.a)(I)),M=Object(E.a)({},Object(w.a)(I));M.stop.stoptimes[1].stop.platformCode=void 0,M.stop.stoptimes[1].trip.pattern.route.mode="BUS",M.stop.stoptimes[1].trip.pattern.route.shortName="543B";var P={currentTime:1524138999,empty:Object(w.a)(O),basic:I,realTime:A,tomorrow:F,missingPlatform:M},L=function(e){function t(t,a){var i,n=a.router;return(i=e.call(this,t)||this).toggleRealtimeMap=function(e){i.setState({showRealtimeVehicles:!i.state.showRealtimeVehicles,updateRealtimeVehicles:!1!==e})},i.hasRealtimeVehicles=function(){i.setState({hasRealtimeVehicles:!0})},i.state={showRealtimeVehicles:!1,hasRealtimeVehicles:!1,updateRealtimeVehicles:!0,isStopPage:!!n.params.stopId},i}Object(i.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.context.config.stopsShowRealtimeTrackingDefault;!this.state.isStopPage&&e&&this.toggleRealtimeMap();var t=this.props.stop.gtfsId||this.props.terminal.gtfsId;this.context.executeAction(D.e,t)},a.componentWillReceiveProps=function(e){var t=e.relay,a=e.currentTime,i=e.realtimeDepartures,n=this.props.currentTime;n!==a&&t.setVariables({currentTime:n}),null===i&&this.state.showRealtimeVehicles&&this.toggleRealtimeMap(!1)},a.componentWillUnmount=function(){this.context.executeAction(D.c)},a.render=function(){var e=this.state,t=e.showRealtimeVehicles,a=e.hasRealtimeVehicles,i=e.updateRealtimeVehicles,n=e.isStopPage,r=this.context,o=r.config.stopsShowRealtimeTracking,s=r.intl,l=this.props.stop||this.props.terminal,d=null!==this.props.terminal;return c.a.createElement("div",{className:"card"},c.a.createElement(k,{stop:l,numberOfDepartures:30,startTime:this.props.relay.variables.currentTime,isTerminal:d,timeRange:d?3600:43200,limit:15,className:"padding-small cursor-pointer",showRealtimeVehicles:t,updateRealtimeVehicles:i,hasRealtimeVehicles:this.hasRealtimeVehicles}),c.a.createElement(g.a,{location:{address:l.name,lat:l.lat,lon:l.lon}},!n&&o&&a&&c.a.createElement("div",{className:"route cursor-pointer special",onClick:this.toggleRealtimeMap,title:s.formatMessage(t?{id:"hide-realtime-on-map",defaultMessage:"Hide vehicles on map"}:{id:"show-realtime-on-map",defaultMessage:"Show vehicles on map"})},c.a.createElement(C.a,{img:t?"icon-icon_realtime_off":"icon-icon_realtime_on"}))))},t}(c.a.PureComponent);L.propTypes={stop:s.a.object,terminal:s.a.object,currentTime:s.a.number.isRequired,relay:s.a.shape({variables:s.a.shape({currentTime:s.a.number.isRequired}).isRequired,setVariables:s.a.func.isRequired}).isRequired,realtimeDepartures:s.a.array},L.defaultProps={realtimeDepartures:void 0},L.contextTypes={intl:f.d.isRequired,config:s.a.shape({stopsShowRealtimeTracking:s.a.bool,stopsShowRealtimeTrackingDefault:s.a.bool}),executeAction:s.a.func.isRequired,router:h.routerShape.isRequired};var U=p.a.createContainer(u()(L,["TimeStore","RealtimeDeparturesStore"],(function(e){var t=e.getStore;return{currentTime:t("TimeStore").getCurrentTime().unix(),realtimeDepartures:t("RealtimeDeparturesStore").getDepartures()}})),{fragments:{stop:function(e){var t,a=e.currentTime;return t=k.getFragment("stop",{startTime:a,timeRange:43200,numberOfDepartures:30}),{children:[].concat.apply([],[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"lat",kind:"Field",metadata:{},type:"Float"},{fieldName:"lon",kind:"Field",metadata:{},type:"Float"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},p.a.QL.__frag(t)]),id:p.a.QL.__id(),kind:"Fragment",metadata:{},name:"StopMarkerPopup_StopRelayQL",type:"Stop"}},terminal:function(e){var t,a=e.currentTime;return t=k.getFragment("stop",{startTime:a,timeRange:3600,numberOfDepartures:30}),{children:[].concat.apply([],[{fieldName:"gtfsId",kind:"Field",metadata:{},type:"String"},{fieldName:"lat",kind:"Field",metadata:{},type:"Float"},{fieldName:"lon",kind:"Field",metadata:{},type:"Float"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},p.a.QL.__frag(t)]),id:p.a.QL.__id(),kind:"Fragment",metadata:{},name:"StopMarkerPopup_TerminalRelayQL",type:"Stop"}}},initialVariables:{currentTime:0}});U.displayName="StopMarkerPopup",U.description=function(){return c.a.createElement("div",null,c.a.createElement(R.a,{description:"empty"},c.a.createElement(y,{size:"small"},c.a.createElement(U,Object.assign({},P.empty,{currentTime:r()().unix()})))),c.a.createElement(R.a,{description:"basic"},c.a.createElement(y,null,c.a.createElement(U,Object.assign({},P.basic,{currentTime:P.currentTime})))),c.a.createElement(R.a,{description:"realTime"},c.a.createElement(y,null,c.a.createElement(U,Object.assign({},P.realTime,{currentTime:P.currentTime})))),c.a.createElement(R.a,{description:"tomorrow"},c.a.createElement(y,{size:"large"},c.a.createElement(U,Object.assign({},P.tomorrow,{currentTime:r()(P.currentTime).subtract(1,"days").unix()})))),c.a.createElement(R.a,{description:"missingPlatform"},c.a.createElement(y,{size:"large"},c.a.createElement(U,Object.assign({},P.missingPlatform,{currentTime:P.currentTime})))))};t.a=U},"./app/util/glfun.js":function(e,t,a){"use strict";function i(e){return function(t){var a=void 0!==e.base?e.base:1,i=e.stops.length;if(1===i)return e.stops[0][1];if(t<=e.stops[0][0])return e.stops[0][1];if(t>=e.stops[i-1][0])return e.stops[i-1][1];var n=function(e,t){for(var a,i,n=0,r=e.length-1,o=0;n<=r;){if(a=e[o=Math.floor((n+r)/2)][0],i=e[o+1][0],t===a||t>a&&t<i)return o;a<t?n=o+1:a>t&&(r=o-1)}return Math.max(o-1,0)}(e.stops,t),r=function(e,t,a,i){var n=i-a,r=e-a;return 0===n?0:1===t?r/n:(Math.pow(t,r)-1)/(Math.pow(t,n)-1)}(t,a,e.stops[n][0],e.stops[n+1][0]);return function(e,t,a){return e*(1-a)+t*a}(e.stops[n][1],e.stops[n+1][1],r)}}a.d(t,"a",(function(){return i}))},"./app/util/mapIconUtils.js":function(e,t,a){"use strict";a.d(t,"C",(function(){return o})),a.d(t,"F",(function(){return s})),a.d(t,"D",(function(){return l})),a.d(t,"w",(function(){return u})),a.d(t,"y",(function(){return f})),a.d(t,"r",(function(){return h})),a.d(t,"d",(function(){return x})),a.d(t,"u",(function(){return y})),a.d(t,"v",(function(){return g})),a.d(t,"g",(function(){return b})),a.d(t,"h",(function(){return v})),a.d(t,"i",(function(){return S})),a.d(t,"s",(function(){return N})),a.d(t,"t",(function(){return T})),a.d(t,"o",(function(){return j})),a.d(t,"p",(function(){return k})),a.d(t,"k",(function(){return R})),a.d(t,"l",(function(){return C})),a.d(t,"q",(function(){return D})),a.d(t,"B",(function(){return E})),a.d(t,"z",(function(){return w})),a.d(t,"j",(function(){return O})),a.d(t,"E",(function(){return _})),a.d(t,"x",(function(){return I})),a.d(t,"A",(function(){return A})),a.d(t,"n",(function(){return F})),a.d(t,"e",(function(){return M})),a.d(t,"f",(function(){return P})),a.d(t,"a",(function(){return L})),a.d(t,"m",(function(){return U})),a.d(t,"b",(function(){return V})),a.d(t,"c",(function(){return H}));var i=a("./node_modules/lodash-es/memoize.js");var n=a("./app/util/glfun.js"),r=11,o=Object(i.a)(Object(n.a)({base:1.15,stops:[[11.9,0],[12,1.5],[22,26]]})),s=Object(i.a)(Object(n.a)({base:1.15,stops:[[11.9,0],[12,1],[22,24]]})),l=Object(i.a)(Object(n.a)({base:1.15,stops:[[14,0],[14.1,2],[22,20]]})),c=Object(i.a)((function(e){var t=e&&function(e){var t=e.toLowerCase();for(var a in document.styleSheets)if({}.hasOwnProperty.call(document.styleSheets,a))try{for(var i in document.styleSheets[a].cssRules)if({}.hasOwnProperty.call(document.styleSheets[a].cssRules,i)){var n=document.styleSheets[a].cssRules[i].selectorText;if(n&&n.split(",").map((function(e){return e.trim()})).indexOf(t)>-1)return document.styleSheets[a].cssRules[i]}}catch(e){continue}return!1}("."+e.toLowerCase());return t&&t.style.color}));var d=Object(i.a)((function(e,t,a,i){return new Promise((function(n){var r=function(e,t,a,i){if(!document)return null;var n=document.getElementById(e),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",t),r.setAttribute("height",a);var o=n.viewBox.baseVal;r.setAttribute("viewBox",o.x+" "+o.y+" "+o.width+" "+o.height),i&&r.setAttribute("fill",i),Array.prototype.forEach.call(n.childNodes,(function(e){var t=e.cloneNode(!0);e.style&&!t.attributes.fill&&(t.style.fill=window.getComputedStyle(e).color),r.appendChild(t)}));var s=new Image(t,a);return s.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(r)),s}(e,t,a,i);r.onload=function(){return n(r)}}))}),(function(e,t,a,i){return e+"_"+t+"_"+a+"_"+i}));function p(e,t,a,i,n){t.ctx.drawImage(e,a.x/t.ratio-i/2,a.y/t.ratio-n/2)}function m(e,t,a,i,n){return e/t.ratio-a/2-i/2+2*n}function u(e,t,a,i,n){var r=i?2:1,d=o(e.coords.z)*r,p=s(e.coords.z)*r,m=l(e.coords.z)*r;d>0&&(e.ctx.beginPath(),e.ctx.fillStyle="#fff",e.ctx.arc(t.x/e.ratio,t.y/e.ratio,d*e.scaleratio,0,2*Math.PI),e.ctx.fill(),e.ctx.beginPath(),e.ctx.fillStyle=c(a),e.ctx.arc(t.x/e.ratio,t.y/e.ratio,p*e.scaleratio,0,2*Math.PI),e.ctx.fill(),m>0&&(e.ctx.beginPath(),e.ctx.fillStyle="#fff",e.ctx.arc(t.x/e.ratio,t.y/e.ratio,m*e.scaleratio,0,2*Math.PI),e.ctx.fill(),n&&m>7&&(e.ctx.font=1.2*m*e.scaleratio+"px Gotham XNarrow SSm A, Gotham XNarrow SSm B, Arial, sans-serif",e.ctx.fillStyle="#333",e.ctx.textAlign="center",e.ctx.textBaseline="middle",e.ctx.fillText(n,t.x/e.ratio,t.y/e.ratio))))}function f(e,t,a,i){var n=(2.5*s(e.coords.z)+8)*e.scaleratio;d("icon-icon_"+a.split(",")[0].toLowerCase(),n,n).then((function(a){if(e.ctx.drawImage(a,t.x/e.ratio-n/2,t.y/e.ratio-n/2),i){e.ctx.fillStyle="#333",e.ctx.strokeStyle="white",e.ctx.lineWidth=2*e.scaleratio,e.ctx.textAlign="center",e.ctx.textBaseline="top",e.ctx.font="500 "+r*e.scaleratio+"px\n          Gotham Rounded SSm A, Gotham Rounded SSm B, Arial, Georgia, Serif";var o=n/2+2*e.scaleratio;i.split(" ").forEach((function(a){e.ctx.strokeText(a,t.x/e.ratio,t.y/e.ratio+o),e.ctx.fillText(a,t.x/e.ratio,t.y/e.ratio+o),o+=(r+2)*e.scaleratio}))}}))}function h(e,t,a){return d("icon-icon_parking-station",a,a).then((function(i){p(i,e,t,a,a)}))}function x(e,t,a){d("icon-icon_camera-station",a,a).then((function(i){p(i,e,t,a,a)}))}function y(e,t,a){d("icon-icon_roadwork",a,a).then((function(i){var n=a*e.scaleratio,r=e.tileSize*e.ratio-n;t.x=t.x<n?n:t.x,t.y=t.y<n?n:t.y,t.x=t.x>r?r:t.x,t.y=t.y>r?r:t.y,p(i,e,t,a,a)}))}function g(e,t,a){void 0===a&&(a="#0073BF");var i=e.ctx,n=i.lineCap,r=i.lineJoin;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath();for(var o=0,s=t.length;o<s;o++)0===o?e.ctx.moveTo(t[o].x/e.ratio,t[o].y/e.ratio):e.ctx.lineTo(t[o].x/e.ratio,t[o].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=5,e.ctx.stroke(),e.ctx.lineCap=n,e.ctx.lineJoin=r,e.ctx.globalCompositeOperation="source-over"}function b(e,t,a,i){d("icon-icon_disorder",a,a).then((function(n){var r=a*e.scaleratio,o=e.tileSize*e.ratio-r;if(t.x=t.x<r?r:t.x,t.y=t.y<r?r:t.y,t.x=t.x>o?o:t.x,t.y=t.y>o?o:t.y,i){var s=n.cloneNode(!0);!function(e,t){var a=e.src.replace(/^.+base64,/,"").replace(/"?\)$/,""),i=window.atob(a).replace(/fill="#[A-Za-z0-9]+"/,'fill="'+t+'"'),n="data:image/svg+xml;base64,"+window.btoa(i);e.src=n}(s,i),setTimeout((function(){return p(s,e,t,a,a)}),0)}else p(n,e,t,a,a)}))}function v(e,t,a){void 0===a&&(a="#0073BF");var i=e.ctx,n=i.lineCap,r=i.lineJoin;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath();for(var o=0,s=t.length;o<s;o++)0===o?e.ctx.moveTo(t[o].x/e.ratio,t[o].y/e.ratio):e.ctx.lineTo(t[o].x/e.ratio,t[o].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=5,e.ctx.stroke(),e.ctx.lineCap=n,e.ctx.lineJoin=r,e.ctx.globalCompositeOperation="source-over"}function S(e,t,a){void 0===a&&(a="#0073BF"),e.ctx.beginPath();for(var i=0,n=t.length;i<n;i++)0===i?e.ctx.moveTo(t[i].x/e.ratio,t[i].y/e.ratio):e.ctx.lineTo(t[i].x/e.ratio,t[i].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=5,e.ctx.stroke();var r=e.ctx.globalAlpha;e.ctx.globalAlpha=.2,e.ctx.fillStyle=a,e.ctx.fill(),e.ctx.globalAlpha=r}function N(e,t,a){d("icon-icon_road_condition",a,a).then((function(i){var n=a*e.scaleratio,r=e.tileSize*e.ratio-n;t.x=t.x<n?n:t.x,t.y=t.y<n?n:t.y,t.x=t.x>r?r:t.x,t.y=t.y>r?r:t.y,p(i,e,t,a,a)}))}function T(e,t,a){void 0===a&&(a="#999999");var i=e.ctx,n=i.lineCap,r=i.lineJoin;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath();for(var o=0,s=t.length;o<s;o++)0===o?e.ctx.moveTo(t[o].x/e.ratio,t[o].y/e.ratio):e.ctx.lineTo(t[o].x/e.ratio,t[o].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=5,e.ctx.stroke(),e.ctx.lineCap=n,e.ctx.lineJoin=r,e.ctx.globalCompositeOperation="source-over"}function j(e,t,a){void 0===a&&(a="#999999");var i=e.ctx,n=i.lineCap,r=i.lineJoin;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath();for(var o=0,s=t.length;o<s;o++)0===o?e.ctx.moveTo(t[o].x/e.ratio,t[o].y/e.ratio):e.ctx.lineTo(t[o].x/e.ratio,t[o].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=5,e.ctx.stroke(),e.ctx.lineCap=n,e.ctx.lineJoin=r,e.ctx.globalCompositeOperation="source-over",e.ctx.closePath()}function k(e,t,a){void 0===a&&(a="#999999");var i=e.ctx,n=i.lineCap,r=i.lineJoin;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath();for(var o=0,s=t.length;o<s;o++)0===o?e.ctx.moveTo(t[o].x,t[o].y):e.ctx.lineTo(t[o].x,t[o].y);e.ctx.strokeStyle=a,e.ctx.lineWidth=10,e.ctx.stroke(),e.ctx.lineCap=n,e.ctx.lineJoin=r,e.ctx.globalCompositeOperation="source-over",e.ctx.closePath()}function R(e,t,a){d("icon-icon_fluency",a,a).then((function(i){var n=a*e.scaleratio,r=e.tileSize*e.ratio-n;t.x=t.x<n?n:t.x,t.y=t.y<n?n:t.y,t.x=t.x>r?r:t.x,t.y=t.y>r?r:t.y,p(i,e,t,a,a)}))}function C(e,t,a,i,n){void 0===a&&(a="#999999"),void 0===i&&(i=5),void 0===n&&(n=!1);var r=e.ctx,o=r.lineCap,s=r.lineJoin,l=r.filter;e.ctx.lineCap="round",e.ctx.lineJoin="round",e.ctx.globalCompositeOperation="destination-over",n&&(e.ctx.filter="blur(2px)"),e.ctx.beginPath();for(var c=0,d=t.length;c<d;c++)0===c?e.ctx.moveTo(t[c].x/e.ratio,t[c].y/e.ratio):e.ctx.lineTo(t[c].x/e.ratio,t[c].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=i,e.ctx.stroke(),e.ctx.lineCap=o,e.ctx.lineJoin=s,e.ctx.filter=l,e.ctx.globalCompositeOperation="source-over"}function D(e,t,a,i){d("icon-icon_park-and-ride",a,i).then((function(n){p(n,e,t,a,i)}))}function E(e,t,a){d("icon-icon_weather-station",a,a).then((function(i){p(i,e,t,a,a)}))}function w(e,t,a){d("icon-icon_tms-station",a,a).then((function(i){p(i,e,t,a,a)}))}function O(e,t,a){d("icon-icon_eco-counter",a,a).then((function(i){p(i,e,t,a,a)}))}function _(e,t,a){return"SPEEDLIMIT"===e?"icon-icon_speed-limit-"+t:"WARNING"===e?"icon-icon_warning-"+t:"INFORMATION"===e&&"UNKNOWN"!==a?"icon-icon_information":"INFORMATION"===e&&"UNKNOWN"===a?"icon-icon_information-grey":null}function I(e,t,a,i){var n=_("SPEEDLIMIT",i);d(n,a,a).then((function(i){p(i,e,t,a,a)}))}function A(e,t,a,i){var n=_("WARNING",i);d(n,a,a).then((function(i){p(i,e,t,a,a)}))}function F(e,t,a,i){var n=_("INFORMATION",void 0,i);d(n,a,a).then((function(i){p(i,e,t,a,a)}))}function M(e,t,a){return d("icon-icon_citybike",a,a).then((function(i){return p(i,e,t,a,a)}))}function P(e,t,a){return d("icon-icon_citybike_off",a,a).then((function(i){return p(i,e,t,a,a)}))}function L(e,t,a,i,n,r){if("good"!==e&&"poor"!==e&&"no"!==e)throw Error("Supported badges are 'good', 'poor', and 'no'");d("icon-icon_"+e+"-availability",n,n).then((function(e){!function(e,t,a,i,n,r){t.ctx.drawImage(e,m(a.x,t,i,n,r),m(a.y,t,i,n,r))}(e,t,a,i,n,r)}))}function U(e,t,a,i){d(e,i,i).then((function(e){p(e,t,a,i,i)}))}function V(e,t,a,i,n,r,o,s){var l=n/2,c=m(t.x,e,i,l,r)+1,d=m(t.y,e,i,l,r)+1;e.ctx.beginPath(),e.ctx.fillStyle=o||(a>3?"#4EA700":"#FF6319"),e.ctx.arc(c,d,l,0,2*Math.PI),e.ctx.fill(),e.ctx.font=(a>99?.5:.7)*n+"px\n    Gotham XNarrow SSm A, Gotham XNarrow SSm B, Arial, sans-serif",e.ctx.fillStyle=s||"#fff",e.ctx.textAlign="center",e.ctx.textBaseline="middle",e.ctx.fillText(a,c,d)}function H(e,t,a,i){void 0===a&&(a="#999999"),void 0===i&&(i=!1);var n=e.ctx,r=n.lineCap,o=n.lineJoin;e.ctx.lineCap=i?"butt":"round",e.ctx.lineJoin=i?"butt":"round",e.ctx.globalCompositeOperation="destination-over",e.ctx.beginPath(),!0===i&&e.ctx.setLineDash([10,5]);for(var s=0,l=t.length;s<l;s++)0===s?e.ctx.moveTo(t[s].x/e.ratio,t[s].y/e.ratio):e.ctx.lineTo(t[s].x/e.ratio,t[s].y/e.ratio);e.ctx.strokeStyle=a,e.ctx.lineWidth=3,e.ctx.stroke(),e.ctx.lineCap=r,e.ctx.lineJoin=o,e.ctx.globalCompositeOperation="source-over",e.ctx.closePath(),e.ctx.setLineDash([])}}}]);
//# sourceMappingURL=f4ce3145a03afe64eea8.js.map